@model Neksara.ViewModels.CategoryDetailVM
@{
    ViewData["Title"] = "Detail Kategori";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<!-- BACK BUTTON -->
<a href="/Admin/CategoryIndex" class="btn btn-outline-secondary mb-3">
    ‚Üê Kembali
</a>

<!-- HEADER -->
<div class="mb-4">
    <h3 class="mb-0">@Model.CategoryName</h3>
    <small class="text-muted">Detail kategori</small>
</div>

<!-- CATEGORY IMAGE -->
@if (!string.IsNullOrEmpty(Model.CategoryPicture))
{
    <div class="mb-4">
        <img src="@Model.CategoryPicture"
             class="img-fluid rounded shadow-sm"
             style="width:100%; max-height:260px; object-fit:cover;" />
    </div>
}

<!-- STATISTICS -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card text-center shadow-sm">
            <div class="card-body py-3">
                <small class="text-muted">Total Topik</small>
                <div class="fs-3 fw-bold text-primary">
                    @Model.TotalTopics
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card text-center shadow-sm">
            <div class="card-body py-3">
                <small class="text-muted">Total Views</small>
                <div class="fs-3 fw-bold text-success">
                    @Model.TotalViews
                </div>
            </div>
        </div>
    </div>
</div>

<!-- TOPIC TABLE -->
<div class="card shadow-sm">
    <div class="card-header bg-white fw-semibold">
        Daftar Topik
    </div>

    <div class="card-body p-0">
        <table class="table table-bordered table-striped align-middle mb-0">
            <thead class="table-dark">
                <tr>
                    <th>Nama Topik</th>
                    <th class="text-center">Views</th>
                    <th>Tanggal</th>
                    <th class="text-center" style="width:120px">Aksi</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var t in Model.Topics)
            {
                <tr>
                    <td>@t.TopicName</td>
                    <td class="text-center">
                        <span class="badge bg-success">
                            @t.ViewCount
                        </span>
                    </td>
                    <td>@t.CreatedAt.ToString("dd MMM yyyy")</td>
                    <td class="text-center">
                        <a href="/Admin/TopicDetail/@t.TopicId"
                           class="btn btn-sm btn-outline-warning">
                            Detail
                        </a>
                    </td>
                </tr>
            }

            @if (!Model.Topics.Any())
            {
                <tr>
                    <td colspan="4" class="text-center text-muted py-4">
                        Belum ada topik pada kategori ini
                    </td>
                </tr>
            }
            </tbody>
        </table>
    </div>
</div>
<!-- PAGINATION -->
<nav class="mt-4">
    <ul class="pagination justify-content-center">
        @for (int i = 1; i <= ViewBag.TotalPages; i++)
        {
            <li class="page-item @(i == ViewBag.CurrentPage ? "active" : "")">
                <a class="page-link"
                   href="?page=@i&search=@ViewBag.CurrentSearch">
                    @i
                </a>
            </li>
        }
    </ul>
</nav>
